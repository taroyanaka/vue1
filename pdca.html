<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDCA Management App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        header {
            background-color: #333;
            color: white;
            padding: 10px;
            text-align: center;
        }
        .container {
            padding: 20px;
        }
        nav {
            margin-bottom: 20px;
        }
        nav button {
            padding: 10px;
            margin-right: 10px;
            cursor: pointer;
        }
        .hidden {
            display: none;
        }
        input, textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button.delete {
            background-color: #f44336;
        }
        .done {
            color: gray;
        }
        .links {
            margin-top: 10px;
        }
        .stars {
            color: gold;
        }
        .language-select {
            margin-bottom: 20px;
            font-size: 24px;
        }
        .language-select span {
            cursor: pointer;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <header>
        <h1>{{ languageData[language].appTitle }}</h1>
    </header>
    <div class="container" id="app">
        <nav>
            <button @click="setActiveTab('projects')">{{ languageData[language].projectManagement }}</button>
            <button @click="setActiveTab('packs')">{{ languageData[language].packManagement }}</button>
        </nav>

        <!-- è¨€èªžè¨­å®š -->
        <div class="language-select">
            <span @click="changeLanguage('en')">ðŸ‡¬ðŸ‡§</span>
            <span @click="changeLanguage('es')">ðŸ‡ªðŸ‡¸</span>
            <span @click="changeLanguage('ja')">ðŸ‡¯ðŸ‡µ</span>
            <span @click="changeLanguage('ko')">ðŸ‡°ðŸ‡·</span>
            <span @click="changeLanguage('zh')">ðŸ‡¨ðŸ‡³</span>
            <span @click="changeLanguage('de')">ðŸ‡©ðŸ‡ª</span>
            <span @click="changeLanguage('fr')">ðŸ‡«ðŸ‡·</span>
        </div>

        <!-- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ã‚¿ãƒ– -->
        <div v-if="activeTab === 'projects'">
            <h2>{{ languageData[language].createProject }}</h2>
            <input v-model="newProject.name" type="text" :placeholder="languageData[language].projectName">
            <textarea v-model="newProject.description" :placeholder="languageData[language].projectDescription"></textarea>
            <input v-model.number="newProject.kpi" type="number" :placeholder="languageData[language].projectKPI">
            <button @click="addProject">{{ languageData[language].addProject }}</button>

            <h2>{{ languageData[language].existingProjects }}</h2>
            <div class="project-list">
                <div v-for="project in projects" :key="project.id" class="project">
                    <h3>{{ project.name }}</h3>
                    <p>{{ project.description }}</p>
                    <p>KPI: {{ project.kpi }}</p>
                    <button @click="deleteProject(project.id)" class="delete">{{ languageData[language].delete }}</button>
                </div>
            </div>
        </div>

        <!-- ãƒ‘ãƒƒã‚¯ç®¡ç†ã‚¿ãƒ– -->
        <div v-if="activeTab === 'packs'">
            <h2>{{ languageData[language].createPack }}</h2>
            <select v-model="newPack.projectId">
                <option v-for="project in projects" :value="project.id">{{ project.name }}</option>
            </select>

            <!-- PDCA ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ -->
            <div v-for="(stage, index) in ['plan', 'do', 'check', 'act']" :key="index">
                <input v-model="newPack[stage].description" type="text" :placeholder="languageData[language][stage]" maxlength="100">
                <label>
                    <input type="checkbox" v-model="newPack[stage].done"> {{ languageData[language].done }}
                </label>
                
                <!-- ãƒªãƒ³ã‚¯è¨­å®š -->
                <div class="links">
                    <div v-for="(link, linkIndex) in newPack[stage].links" :key="linkIndex">
                        <input v-model="link.name" type="text" :placeholder="languageData[language].linkName">
                        <input v-model="link.href" type="url" :placeholder="languageData[language].linkHref">
                        <select v-model="link.stars">
                            <option v-for="i in 5" :value="i">{{ i }}</option>
                        </select>
                        <span class="stars">{{ 'â˜…'.repeat(link.stars) }}</span>
                    </div>
                    <button @click="addLink(stage)">{{ languageData[language].addLink }}</button>
                </div>
            </div>

            <button @click="addPack">{{ languageData[language].addPack }}</button>

            <h2>{{ languageData[language].existingPacks }}</h2>
            <div class="pack-list">
                <div v-for="pack in packs" :key="pack.id" class="pack">
                    <h3>{{ getProjectName(pack.projectId) }}</h3>
                    <div v-for="(stage, index) in ['plan', 'do', 'check', 'act']" :key="index" :class="{ done: pack[stage].done }">
                        <p>{{ languageData[language][stage] }}: {{ pack[stage].description }}</p>
                        <div v-for="(link, linkIndex) in pack[stage].links" :key="linkIndex">
                            <a :href="link.href" target="_blank">{{ link.name }}</a>
                            <span class="stars">{{ 'â˜…'.repeat(link.stars) }}</span>
                        </div>
                    </div>
                    <button @click="deletePack(pack.id)" class="delete">{{ languageData[language].delete }}</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@3"></script>
    <script src="https://cdn.jsdelivr.net/npm/localforage"></script>
    <script>
        const app = Vue.createApp({
            data() {
                return {
                    activeTab: 'projects',
                    language: 'en',
                    languageData: {
                        en: {
                            appTitle: 'PDCA Management App',
                            projectManagement: 'Project Management',
                            packManagement: 'Pack Management',
                            createProject: 'Create Project',
                            projectName: 'Project Name',
                            projectDescription: 'Project Description',
                            projectKPI: 'Project KPI',
                            addProject: 'Add Project',
                            existingProjects: 'Existing Projects',
                            delete: 'Delete',
                            createPack: 'Create Pack',
                            addPack: 'Add Pack',
                            existingPacks: 'Existing Packs',
                            plan: 'Plan',
                            do: 'Do',
                            check: 'Check',
                            act: 'Act',
                            done: 'Done',
                            undone: 'Undone',
                            linkName: 'Link Name',
                            linkHref: 'Link URL',
                            addLink: 'Add Link'
                        },
                        es: {
                            appTitle: 'AplicaciÃ³n de GestiÃ³n PDCA',
                            projectManagement: 'GestiÃ³n de Proyectos',
                            packManagement: 'GestiÃ³n de Paquetes',
                            createProject: 'Crear Proyecto',
                            projectName: 'Nombre del Proyecto',
                            projectDescription: 'DescripciÃ³n del Proyecto',
                            projectKPI: 'KPI del Proyecto',
                            addProject: 'AÃ±adir Proyecto',
                            existingProjects: 'Proyectos Existentes',
                            delete: 'Eliminar',
                            createPack: 'Crear Paquete',
                            addPack: 'AÃ±adir Paquete',
                            existingPacks: 'Paquetes Existentes',
                            plan: 'Planificar',
                            do: 'Hacer',
                            check: 'Verificar',
                            act: 'Actuar',
                            done: 'Hecho',
                            undone: 'No Hecho',
                            linkName: 'Nombre del Enlace',
                            linkHref: 'URL del Enlace',
                            addLink: 'AÃ±adir Enlace'
                        },
                        ja: {
                            appTitle: 'PDCAç®¡ç†ã‚¢ãƒ—ãƒª',
                            projectManagement: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†',
                            packManagement: 'ãƒ‘ãƒƒã‚¯ç®¡ç†',
                            createProject: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ',
                            projectName: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå',
                            projectDescription: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®èª¬æ˜Ž',
                            projectKPI: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®KPI',
                            addProject: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿½åŠ ',
                            existingProjects: 'æ—¢å­˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ',
                            delete: 'å‰Šé™¤',
                            createPack: 'ãƒ‘ãƒƒã‚¯ã‚’ä½œæˆ',
                            addPack: 'ãƒ‘ãƒƒã‚¯ã‚’è¿½åŠ ',
                            existingPacks: 'æ—¢å­˜ã®ãƒ‘ãƒƒã‚¯',
                            plan: 'è¨ˆç”»',
                            do: 'å®Ÿè¡Œ',
                            check: 'ç¢ºèª',
                            act: 'æ”¹å–„',
                            done: 'å®Œäº†',
                            undone: 'æœªå®Œäº†',
                            linkName: 'ãƒªãƒ³ã‚¯å',
                            linkHref: 'ãƒªãƒ³ã‚¯URL',
                            addLink: 'ãƒªãƒ³ã‚¯ã‚’è¿½åŠ '
                        },
                        ko: {
                            appTitle: 'PDCA ê´€ë¦¬ ì•±',
                            projectManagement: 'í”„ë¡œì íŠ¸ ê´€ë¦¬',
                            packManagement: 'íŒ© ê´€ë¦¬',
                            createProject: 'í”„ë¡œì íŠ¸ ìƒì„±',
                            projectName: 'í”„ë¡œì íŠ¸ ì´ë¦„',
                            projectDescription: 'í”„ë¡œì íŠ¸ ì„¤ëª…',
                            projectKPI: 'í”„ë¡œì íŠ¸ KPI',
                            addProject: 'í”„ë¡œì íŠ¸ ì¶”ê°€',
                            existingProjects: 'ê¸°ì¡´ í”„ë¡œì íŠ¸',
                            delete: 'ì‚­ì œ',
                            createPack: 'íŒ© ìƒì„±',
                            addPack: 'íŒ© ì¶”ê°€',
                            existingPacks: 'ê¸°ì¡´ íŒ©',
                            plan: 'ê³„íš',
                            do: 'ì‹¤í–‰',
                            check: 'í™•ì¸',
                            act: 'ì¡°ì •',
                            done: 'ì™„ë£Œë¨',
                            undone: 'ë¯¸ì™„ë£Œë¨',
                            linkName: 'ë§í¬ ì´ë¦„',
                            linkHref: 'ë§í¬ URL',
                            addLink: 'ë§í¬ ì¶”ê°€'
                        },
                        zh: {
                            appTitle: 'PDCAç®¡ç†åº”ç”¨',
                            projectManagement: 'é¡¹ç›®ç®¡ç†',
                            packManagement: 'åŒ…ç®¡ç†',
                            createProject: 'åˆ›å»ºé¡¹ç›®',
                            projectName: 'é¡¹ç›®åç§°',
                            projectDescription: 'é¡¹ç›®æè¿°',
                            projectKPI: 'é¡¹ç›®KPI',
                            addProject: 'æ·»åŠ é¡¹ç›®',
                            existingProjects: 'çŽ°æœ‰é¡¹ç›®',
                            delete: 'åˆ é™¤',
                            createPack: 'åˆ›å»ºåŒ…',
                            addPack: 'æ·»åŠ åŒ…',
                            existingPacks: 'çŽ°æœ‰åŒ…',
                            plan: 'è®¡åˆ’',
                            do: 'æ‰§è¡Œ',
                            check: 'æ£€æŸ¥',
                            act: 'è¡ŒåŠ¨',
                            done: 'å®Œæˆ',
                            undone: 'æœªå®Œæˆ',
                            linkName: 'é“¾æŽ¥åç§°',
                            linkHref: 'é“¾æŽ¥URL',
                            addLink: 'æ·»åŠ é“¾æŽ¥'
                        },
                        de: {
                            appTitle: 'PDCA Management App',
                            projectManagement: 'Projektmanagement',
                            packManagement: 'Pack-Verwaltung',
                            createProject: 'Projekt erstellen',
                            projectName: 'Projektname',
                            projectDescription: 'Projektbeschreibung',
                            projectKPI: 'Projekt-KPI',
                            addProject: 'Projekt hinzufÃ¼gen',
                            existingProjects: 'Bestehende Projekte',
                            delete: 'LÃ¶schen',
                            createPack: 'Pack erstellen',
                            addPack: 'Pack hinzufÃ¼gen',
                            existingPacks: 'Bestehende Packs',
                            plan: 'Planen',
                            do: 'Tun',
                            check: 'ÃœberprÃ¼fen',
                            act: 'Handeln',
                            done: 'Erledigt',
                            undone: 'Nicht erledigt',
                            linkName: 'Link-Name',
                            linkHref: 'Link-URL',
                            addLink: 'Link hinzufÃ¼gen'
                        },
                        fr: {
                            appTitle: 'Application de Gestion PDCA',
                            projectManagement: 'Gestion de Projet',
                            packManagement: 'Gestion des Packs',
                            createProject: 'CrÃ©er un Projet',
                            projectName: 'Nom du Projet',
                            projectDescription: 'Description du Projet',
                            projectKPI: 'KPI du Projet',
                            addProject: 'Ajouter un Projet',
                            existingProjects: 'Projets Existants',
                            delete: 'Supprimer',
                            createPack: 'CrÃ©er un Pack',
                            addPack: 'Ajouter un Pack',
                            existingPacks: 'Packs Existants',
                            plan: 'Planifier',
                            do: 'Faire',
                            check: 'VÃ©rifier',
                            act: 'Agir',
                            done: 'TerminÃ©',
                            undone: 'Non TerminÃ©',
                            linkName: 'Nom du Lien',
                            linkHref: 'URL du Lien',
                            addLink: 'Ajouter un Lien'
                        }
                    },
                    projects: [],
                    packs: [],
                    newProject: {
                        name: '',
                        description: '',
                        kpi: 0
                    },
                    newPack: {
                        projectId: null,
                        plan: { description: '', done: false, links: [] },
                        do: { description: '', done: false, links: [] },
                        check: { description: '', done: false, links: [] },
                        act: { description: '', done: false, links: [] }
                    }
                };
            },
            methods: {
                setActiveTab(tab) {
                    this.activeTab = tab;
                },
                addProject() {
                    const project = { ...this.newProject, id: Date.now() };
                    this.projects.push(project);
                    this.saveData();
                    this.newProject.name = '';
                    this.newProject.description = '';
                    this.newProject.kpi = 0;
                },
                addPack() {
                    const pack = {
                        id: Date.now(),
                        projectId: this.newPack.projectId,
                        plan: { ...this.newPack.plan },
                        do: { ...this.newPack.do },
                        check: { ...this.newPack.check },
                        act: { ...this.newPack.act }
                    };
                    this.packs.push(pack);
                    this.saveData();
                    this.resetNewPack();
                },
                deleteProject(id) {
                    this.projects = this.projects.filter(p => p.id !== id);
                    this.saveData();
                },
                deletePack(id) {
                    this.packs = this.packs.filter(p => p.id !== id);
                    this.saveData();
                },
                getProjectName(projectId) {
                    const project = this.projects.find(p => p.id === projectId);
                    return project ? project.name : 'Unknown';
                },
                addLink(stage) {
                    if (this.newPack[stage].links.length < 5) {
                        this.newPack[stage].links.push({ name: '', href: '', stars: 3 });
                    }
                },
                changeLanguage(lang) {
                    this.language = lang;
                },
                saveData() {
                    localforage.setItem('projects', this.projects);
                    localforage.setItem('packs', this.packs);
                },
                loadData() {
                    localforage.getItem('projects').then(value => {
                        if (value) this.projects = value;
                    });
                    localforage.getItem('packs').then(value => {
                        if (value) this.packs = value;
                    });
                },
                resetNewPack() {
                    this.newPack = {
                        projectId: null,
                        plan: { description: '', done: false, links: [] },
                        do: { description: '', done: false, links: [] },
                        check: { description: '', done: false, links: [] },
                        act: { description: '', done: false, links: [] }
                    };
                }
            },
            mounted() {
                this.loadData();
            }
        });
        app.mount('#app');
    </script>
</body>
</html>
